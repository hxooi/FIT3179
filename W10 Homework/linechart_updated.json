{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "width": 750,
  "height": 500,
  "title": "Distribution of Unicorn Startups across Industries",
  "data": {
    "url": "https://raw.githubusercontent.com/hxooi/FIT3179/main/W10%20Homework/unicorn_heatmap.csv"
  },
  "layer": [
    {
      "params": [
        {
          "name": "industry_highlight",
          "select": {"type": "point", "fields": ["Industry"]},
          "bind": "legend"
        },
        {
          "name": "hover",
          "value": [{"Industry": "Fintech"}],
          "select": {"type": "point", "fields": ["Industry"], "on": "mouseover"}
        }
      ],
      "mark": {"type": "line", "point": true},
      "encoding": {
        "x": {"field": "Year", "type": "ordinal", "title": "Year"},
        "y": {"aggregate": "count", "type": "quantitative", "title": "Number of Companies"},
        "color": {
          "condition": {
            "param": "industry_highlight",
            "field": "Industry",
            "type": "nominal",
            "scale": {
              "range": [
                "#357C3C","#85C88A","#E5CB9F","#FFCCB3","#FFAB76",
                "#FE7E6D","#FFD372","#C689C6","#AC66CC","#A799B7",
                "#B7657B","#93ABD3","#7692E4","#3F52E3","#2541B2"
              ]
            }
          },
          "value": "lightgray"
        },
        "opacity": {"condition": {"param": "industry_highlight", "value": 1}, "value": 0.2},
        "tooltip": [
          {"field": "Year", "type": "ordinal", "title": "Year"},
          {"field": "Industry", "type": "nominal", "title": "Industry"},
          {"aggregate": "count", "type": "quantitative", "title": "Number of Company Joined"}
        ]
      }
    },
    {
      "mark": {"type": "rule", "strokeDash": [6, 6], "strokeWidth": 2, "color": "black"},
      "encoding": {
        "x": {"datum": "2021", "type": "ordinal"}
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "dx": -120,        // move slightly to the right
        "dy": -120,      // move above the point
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "black"
      },
      "encoding": {
        "x": {"datum": "2021", "type": "ordinal"},
        "y": {"value": 138},  // adjust slightly above the highest y value
        "text": {"value": "Peak at year 2021"}
      }
    }
  ]
}
